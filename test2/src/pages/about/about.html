<ion-header *ngIf=!inDeletionMode>
  <ion-navbar>
    <ion-title>
      Pantry
    </ion-title>
    <!--
    <ion-buttons right>
      <button ion-button icon-only (click)="deleteFood()"><ion-icon name="trash"></ion-icon></button>
    </ion-buttons>
    -->
  </ion-navbar>
</ion-header>

<ion-header  *ngIf=inDeletionMode>
  <ion-toolbar color="danger">
    <ion-buttons left>
      <button ion-button icon-only (click)="closeSelected()"><ion-icon name="close"></ion-icon></button>
    </ion-buttons>
    <ion-title>
      {{selected.length}} items selected
    </ion-title>
    <!--
    <ion-buttons right>
      <button ion-button icon-only (click)="deleteFood()"><ion-icon name="trash"></ion-icon></button>
    </ion-buttons>
    -->
  </ion-toolbar>
</ion-header>


<ion-content padding>
  <ion-fab left bottom *ngIf=!inDeletionMode>
      <button ion-fab mini (click)="deleteFood()" ><ion-icon name="trash"></ion-icon></button>
    </ion-fab>
  
  <ion-fab left bottom *ngIf=inDeletionMode>
      <button ion-fab (click)="deleteFood()" color="danger"><ion-icon name="trash"></ion-icon></button>
    </ion-fab>
  
   <ion-fab right bottom *ngIf=!inDeletionMode>
    <button ion-fab color><ion-icon name="add"></ion-icon></button>
    <ion-fab-list side="left">
      <button ion-fab (click)="takePicture()"><ion-icon name="camera"></ion-icon></button>
      <button ion-fab (click)="openFoodCreate()"><ion-icon name="md-create"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>
   
   <ion-fab right bottom *ngIf=inDeletionMode>
    <button mini ion-fab color><ion-icon name="add"></ion-icon></button>
    <ion-fab-list side="left">
      <button ion-fab (click)="takePicture()"><ion-icon name="camera"></ion-icon></button>
      <button ion-fab (click)="openFoodCreate()"><ion-icon name="md-create"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>
   
  
   <ion-list>
    <ion-item tappable>
      <ion-label class='select-label'>Sort</ion-label>
      <ion-select class='select-box' [(ngModel)]="sort" (ionChange)="foodService.sortPantry(sort)">
        <ion-option value="alphabetical">Alphabetical</ion-option>
        <ion-option value="category">Category</ion-option>
        <!--<ion-option value="recent">Recent</ion-option>-->
      </ion-select>
    </ion-item>
  </ion-list>
   
  <img [src]="base64Image" *ngIf="base64Image" />

  <ion-grid>
    <div *ngFor="let food of foodService.foodthings; let i = index">
      <ion-row *ngIf="i%3 == 0"> 
        <ion-col col-4 (tap)="multicheckTap(food)">
          <ion-card [class.is-selected]='food.pantrySelected' (click)="goToFoodDetail(food)"><ion-item no-lines><div class="card-description">{{food.name}}</div>
          <img class="full-image" src={{food.image_link}}>
          </ion-item><ion-icon item-right name='checkmark-circle' *ngIf=food.pantrySelected></ion-icon></ion-card>
        </ion-col>
       
        <ion-col col-4 *ngIf="(i+1) < foodService.foodthings.length" (tap)="multicheckTap(foodService.foodthings[i+1])">
          <ion-card [class.is-selected]='foodService.foodthings[i+1].pantrySelected' (click)="goToFoodDetail(foodService.foodthings[i+1])"><ion-item no-lines><div class="card-description">{{foodService.foodthings[i+1].name}}</div>
          <img class="full-image" src={{foodService.foodthings[i+1].image_link}}>
          </ion-item><ion-icon item-right name='checkmark-circle' *ngIf=foodService.foodthings[i+1].pantrySelected></ion-icon></ion-card>
        </ion-col>
        
        <ion-col col-4 *ngIf="(i+2) < foodService.foodthings.length" (tap)="multicheckTap(foodService.foodthings[i+2])">
          <ion-card [class.is-selected]='foodService.foodthings[i+2].pantrySelected' (click)="goToFoodDetail(foodService.foodthings[i+2])"><ion-item no-lines><div class="card-description">{{foodService.foodthings[i+2].name}}</div>
          <img class="full-image" src={{foodService.foodthings[i+2].image_link}}>
          </ion-item><ion-icon item-right name='checkmark-circle' *ngIf=foodService.foodthings[i+2].pantrySelected></ion-icon></ion-card>
        </ion-col>
        
      </ion-row>
    </div>
  </ion-grid>
   
</ion-content>
